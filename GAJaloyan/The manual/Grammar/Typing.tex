\documentclass[11pt]{article}

\usepackage{bcprules}

\begin{document}

\infrule[stringConst]
    {s \mbox{ is a } \langle string \rangle \mbox{ token}} 
    {\Gamma \vdash s : \texttt{String}}
\infrule[inst]
    {\tau \in{ \mbox{inst}(\Gamma (s))}} 
    {\Gamma \vdash s : \tau}
\infrule[arg]
    {\Gamma \vdash s : \texttt{Stream } \tau} 
    {\Gamma \vdash \texttt{Arg } s : \texttt{Arg}}
%\infrule[argL]
%    {} 
%    {\Gamma \vdash \texttt{[]} : \texttt{Arg}}
%\infrule[argLCons]
%    {\Gamma \vdash h : \texttt{Arg} \andalso \Gamma \vdash t : \texttt{[Arg]}} 
%    {\Gamma \vdash h\texttt{:}t : \texttt{[Arg]}}
%\infrule[argL2]
%    {\Gamma \vdash x_1, ..., x_n : \texttt{Arg}} 
%    {\Gamma \vdash \texttt{[}x_1 \texttt{,} ... \texttt{,} x_n \texttt{]} : \texttt{[Arg]}}
\infrule[valConst]
    {\Gamma \vdash x : \tau} 
    {\Gamma  \vdash {\texttt{constant } x : \texttt{Stream } \tau }}
\infrule[drop]
    {\Gamma \vdash i : \texttt{Integer} \andalso \Gamma \vdash x :  \texttt{Stream } \tau} 
    {\Gamma  \vdash {\texttt{drop } i~x : \texttt{Stream } \tau }}
\infrule[Append] 
    {\Gamma \vdash ls : [a] \andalso \Gamma \vdash s : \mbox{Spec } a} 
    {\Gamma \vdash ls ++ s : \mbox{Spec } a}


\infrule[label]
    {\Gamma \vdash s : \texttt{String} \andalso \Gamma \vdash x : \texttt{Stream } \tau} 
    {\Gamma  \vdash {\texttt{label } s~x : \texttt{Stream } \tau }}

\infrule[ext]
    {\Gamma \vdash s : \texttt{String} \andalso \Gamma \vdash x : \texttt{Stream } \tau} 
    {\Gamma  \vdash {\texttt{extern } s~x : \texttt{Stream } \tau }}
\infrule[extB]
    {\Gamma \vdash s : \texttt{String} \andalso \Gamma \vdash x : \texttt{Stream Bool}} 
    {\Gamma  \vdash {\texttt{externB } s~x : \texttt{Stream Bool}}}
\infrule[extI8]
    {\Gamma \vdash s : \texttt{String} \andalso \Gamma \vdash x : \texttt{Stream Int8}} 
    {\Gamma  \vdash {\texttt{externI8 } s~x : \texttt{Stream Int8}}}
\infrule[extI16]
    {\Gamma \vdash s : \texttt{String} \andalso \Gamma \vdash x : \texttt{Stream Int16}} 
    {\Gamma  \vdash {\texttt{externI16 } s~x : \texttt{Stream Int16}}}
\infrule[extI32]
    {\Gamma \vdash s : \texttt{String} \andalso \Gamma \vdash x : \texttt{Stream Int32}} 
    {\Gamma  \vdash {\texttt{externI32 } s~x : \texttt{Stream Int32}}}
\infrule[extI64]
    {\Gamma \vdash s : \texttt{String} \andalso \Gamma \vdash x : \texttt{Stream Int64}} 
    {\Gamma  \vdash {\texttt{externI64 } s~x : \texttt{Stream Int64}}}
\infrule[extW8]
    {\Gamma \vdash s : \texttt{String} \andalso \Gamma \vdash x : \texttt{Stream Word8}} 
    {\Gamma  \vdash {\texttt{externW8 } s~x : \texttt{Stream Word8}}}
\infrule[extW16]
    {\Gamma \vdash s : \texttt{String} \andalso \Gamma \vdash x : \texttt{Stream Word16}} 
    {\Gamma  \vdash {\texttt{externW16 } s~x : \texttt{Stream Word16}}}
\infrule[extW32]
    {\Gamma \vdash s : \texttt{String} \andalso \Gamma \vdash x : \texttt{Stream Word32}} 
    {\Gamma  \vdash {\texttt{externW32 } s~x : \texttt{Stream Word32}}}
\infrule[extW64]
    {\Gamma \vdash s : \texttt{String} \andalso \Gamma \vdash x : \texttt{Stream Word64}} 
    {\Gamma  \vdash {\texttt{externW64 } s~x : \texttt{Stream Word64}}}
\infrule[extFloat]
    {\Gamma \vdash s : \texttt{String} \andalso \Gamma \vdash x : \texttt{Stream Float}} 
    {\Gamma  \vdash {\texttt{externF } s~x : \texttt{Stream Float}}}
\infrule[extDouble]
    {\Gamma \vdash s : \texttt{String} \andalso \Gamma \vdash x : \texttt{Stream Double}} 
    {\Gamma  \vdash {\texttt{externD } s~x : \texttt{Stream Double}}}


\infrule[extFun]
    {\Gamma \vdash s : \texttt{String} \andalso \Gamma \vdash a : \texttt{[Arg]} \andalso \Gamma \vdash x : \texttt{Stream } \tau} 
    {\Gamma  \vdash {\texttt{externFun } s~a~x : \texttt{Stream } \tau}}

\infrule[extA]
    {\Gamma \vdash s : \texttt{String} \andalso \Gamma \vdash i : \texttt{Integral } \tau_1\Rightarrow \texttt{Stream } \tau_1 \andalso \Gamma \vdash m : \texttt{Integer} \andalso \Gamma \vdash x :  \texttt{[[} \tau \texttt{]]}} 
    {\Gamma  \vdash {\texttt{externArray } s~i~m~x : \texttt{Stream } \tau }}

\infrule[extAB]
    {\Gamma \vdash s : \texttt{String} \andalso \Gamma \vdash i : \texttt{Integral } \tau_1\Rightarrow \texttt{Stream } \tau_1 \andalso \Gamma \vdash m : \texttt{Integer} \andalso \Gamma \vdash x :  \texttt{[[Bool]]}} 
    {\Gamma  \vdash {\texttt{externArrayB } s~i~m~x : \texttt{Stream Bool}}}


\infrule[extAI8]
    {\Gamma \vdash s : \texttt{String} \andalso \Gamma \vdash i : \texttt{Integral } \tau_1\Rightarrow \texttt{Stream } \tau_1 \andalso \Gamma \vdash m : \texttt{Integer} \andalso \Gamma \vdash x :  \texttt{[[Int8]]}} 
    {\Gamma  \vdash {\texttt{externArrayI8 } s~i~m~x : \texttt{Stream Int8}}}

\infrule[extAI16]
    {\Gamma \vdash s : \texttt{String} \andalso \Gamma \vdash i : \texttt{Integral } \tau_1\Rightarrow \texttt{Stream } \tau_1 \andalso \Gamma \vdash m : \texttt{Integer} \andalso \Gamma \vdash x :  \texttt{[[Int16]]}} 
    {\Gamma  \vdash {\texttt{externArrayI16 } s~i~m~x : \texttt{Stream Int16}}}
\infrule[extAI32]
    {\Gamma \vdash s : \texttt{String} \andalso \Gamma \vdash i : \texttt{Integral } \tau_1\Rightarrow \texttt{Stream } \tau_1 \andalso \Gamma \vdash m : \texttt{Integer} \andalso \Gamma \vdash x :  \texttt{[[Int32]]}} 
    {\Gamma  \vdash {\texttt{externArrayI32 } s~i~m~x : \texttt{Stream Int32}}}
\infrule[extAI64]
    {\Gamma \vdash s : \texttt{String} \andalso \Gamma \vdash i : \texttt{Integral } \tau_1\Rightarrow \texttt{Stream } \tau_1 \andalso \Gamma \vdash m : \texttt{Integer} \andalso \Gamma \vdash x :  \texttt{[[Int64]]}} 
    {\Gamma  \vdash {\texttt{externArrayI64 } s~i~m~x : \texttt{Stream Int64}}}

\infrule[extAW8]
    {\Gamma \vdash s : \texttt{String} \andalso \Gamma \vdash i : \texttt{Integral } \tau_1\Rightarrow \texttt{Stream } \tau_1 \andalso \Gamma \vdash m : \texttt{Integer} \andalso \Gamma \vdash x :  \texttt{[[Word8]]}} 
    {\Gamma  \vdash {\texttt{externArrayW8 } s~i~m~x : \texttt{Stream Word8}}}
\infrule[extAW16]
    {\Gamma \vdash s : \texttt{String} \andalso \Gamma \vdash i : \texttt{Integral } \tau_1\Rightarrow \texttt{Stream } \tau_1 \andalso \Gamma \vdash m : \texttt{Integer} \andalso \Gamma \vdash x :  \texttt{[[Word16]]}} 
    {\Gamma  \vdash {\texttt{externArrayW16 } s~i~m~x : \texttt{Stream Word16}}}
\infrule[extAW32]
    {\Gamma \vdash s : \texttt{String} \andalso \Gamma \vdash i : \texttt{Integral } \tau_1\Rightarrow \texttt{Stream } \tau_1 \andalso \Gamma \vdash m : \texttt{Integer} \andalso \Gamma \vdash x :  \texttt{[[Word32]]}} 
    {\Gamma  \vdash {\texttt{externArrayW32 } s~i~m~x : \texttt{Stream Word32}}}
\infrule[extAW64]
    {\Gamma \vdash s : \texttt{String} \andalso \Gamma \vdash i : \texttt{Integral } \tau_1\Rightarrow \texttt{Stream } \tau_1 \andalso \Gamma \vdash m : \texttt{Integer} \andalso \Gamma \vdash x :  \texttt{[[Word64]]}} 
    {\Gamma  \vdash {\texttt{externArrayW64 } s~i~m~x : \texttt{Stream Word64}}}
\infrule[extAFloat]
    {\Gamma \vdash s : \texttt{String} \andalso \Gamma \vdash i : \texttt{Integral } \tau_1\Rightarrow \texttt{Stream } \tau_1 \andalso \Gamma \vdash m : \texttt{Integer} \andalso \Gamma \vdash x :  \texttt{[[Float]]}} 
    {\Gamma  \vdash {\texttt{externArrayF } s~i~m~x : \texttt{Stream Float}}}
\infrule[extADouble]
    {\Gamma \vdash s : \texttt{String} \andalso \Gamma \vdash i : \texttt{Integral } \tau_1\Rightarrow \texttt{Stream } \tau_1 \andalso \Gamma \vdash m : \texttt{Integer} \andalso \Gamma \vdash x :  \texttt{[[Double]]}} 
    {\Gamma  \vdash {\texttt{externArrayD } s~i~m~x : \texttt{Stream Double}}}


\infrule[op1Bool]
    {\Gamma \vdash x : \texttt{Stream Bool} \andalso op \in \{ \texttt{not} \}} 
    {\Gamma  \vdash {op~x : \texttt{Stream Bool}}}


\infrule[op1Bitwise]
    {\Gamma \vdash x :  \texttt{Bits } \tau \Rightarrow \texttt{Stream } \tau \andalso op \in \{\texttt{complement} \}} 
    {\Gamma  \vdash {op~x : \texttt{Stream } \tau}}

\infrule[op1Num]
    {\Gamma \vdash x :  \texttt{Integral } \tau \Rightarrow \texttt{Stream } \tau \andalso op \in \{ \texttt{abs},\texttt{signum} \}} 
    {\Gamma  \vdash {op~x : \texttt{Stream } \tau}}


\infrule[op2Bool]
    {\Gamma \vdash x : \texttt{Stream Bool} \andalso \Gamma \vdash y : \texttt{Stream Bool} \andalso op \in \{ \texttt{||},\texttt{\&\&},\texttt{`xor`},\texttt{==>} \}} 
    {\Gamma  \vdash {op~x~y : \texttt{Stream Bool}}}



\infrule[op2Integral]
    {\Gamma \vdash x :  \texttt{Integral } \tau \Rightarrow\texttt{Stream }  \tau \andalso \Gamma \vdash y : \texttt{Integral } \tau  \Rightarrow \texttt{Stream }  \tau \andalso op \in \{ \texttt{`mod`}, \texttt{`div`} \}} 
    {\Gamma  \vdash {op~x~y : \texttt{Stream } \tau}}



\infrule[op2Fractionnal]
    {\Gamma \vdash x :  \texttt{Fractionnal } \tau \Rightarrow\texttt{Stream }  \tau \andalso \Gamma \vdash y : \texttt{Fractionnal } \tau  \Rightarrow \texttt{Stream }  \tau \andalso op \in \{ \texttt{/} \}} 
    {\Gamma  \vdash {op~x~y : \texttt{Stream } \tau}}

\infrule[op2Floating]
    {\Gamma \vdash x :  \texttt{Floating } \tau \Rightarrow\texttt{Stream }  \tau \andalso \Gamma \vdash y : \texttt{Floating } \tau  \Rightarrow \texttt{Stream }  \tau \andalso op \in \{ \texttt{**},\texttt{`logBase`} \}} 
    {\Gamma  \vdash {op~x~y : \texttt{Stream } \tau}}

\infrule[op2Num]
    {\Gamma \vdash x :  \texttt{Num } \tau \Rightarrow\texttt{Stream }  \tau \andalso \Gamma \vdash y : \texttt{Num } \tau  \Rightarrow \texttt{Stream }  \tau \andalso op \in \{ \texttt{+}, \texttt{-}, \texttt{*} \}} 
    {\Gamma  \vdash {op~x~y : \texttt{Stream } \tau}}

\infrule[op2Eq]
    {\Gamma \vdash x :  \texttt{Eq } \tau \Rightarrow\texttt{Stream }  \tau \andalso \Gamma \vdash y : \texttt{Eq } \tau  \Rightarrow \texttt{Stream }  \tau \andalso op \in \{ \texttt{==}, \texttt{/=} \}} 
    {\Gamma  \vdash {op~x~y : \texttt{Stream } \tau}}

\infrule[op2Ord]
    {\Gamma \vdash x :  \texttt{Ord } \tau \Rightarrow\texttt{Stream }  \tau \andalso \Gamma \vdash y : \texttt{Ord } \tau  \Rightarrow \texttt{Stream }  \tau \andalso op \in \{ \texttt{<},\texttt{<=}, \texttt{>=}, \texttt{>}\}} 
    {\Gamma  \vdash {op~x~y : \texttt{Stream } \tau}}


\infrule[op2Bitwise]
    {\Gamma \vdash x :  \texttt{Bits } \tau \Rightarrow\texttt{Stream }  \tau \andalso \Gamma \vdash y : \texttt{Bits } \tau  \Rightarrow \texttt{Stream }  \tau \andalso op \in \{ \texttt{.\&.},\texttt{.|.}, \texttt{.\textasciicircum.}\}} 
    {\Gamma  \vdash {op~x~y : \texttt{Stream } \tau}}

\infrule[op2BwShift]
    {\Gamma \vdash x :  \texttt{Bits } \tau \Rightarrow\texttt{Stream }  \tau \andalso \Gamma \vdash y : \texttt{Integral } \tau_1  \Rightarrow \texttt{Stream }  \tau_1 \andalso op \in \{ \texttt{.>>.},\texttt{.<<.}\}} 
    {\Gamma  \vdash {op~x~y : \texttt{Stream } \tau}}

\infrule[op3]
    {\Gamma \vdash x : \texttt{Stream Bool} \andalso \Gamma \vdash y : \texttt{Stream } \tau \andalso \Gamma \vdash z : \texttt{Stream } \tau \andalso op \in \{ \texttt{mux} \}} 
    {\Gamma  \vdash {op~x~y~z : \texttt{Stream } \tau}}

\end{document}
