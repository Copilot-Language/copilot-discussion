   \documentclass{beamer}
   \usepackage[utf8]{inputenc}
   \usepackage{tabularx}
   \usetheme{Frankfurt}
   \newcommand\TestAppExists[3]{#2}
   \usepackage{minted}
   \usepackage{listings}

   
\usepackage{mathpartir}
\usepackage{multicol}
\usepackage{graphicx}

  
  \setbeamerfont{institute}{size=\fontsize{7pt}{8pt}}
  
  \title{Copilot : Traceability and Verification of a Low Level Automatically Generated C Source Code}
  \author{Georges-Axel Jaloyan}
  \institute{\'Ecole Normale SupÃ©rieure, NASA Langley Research center, National Institute of Aerospace}
  \date{August 24, 2015}
  
  \begin{document}
\begin{frame}
  		
  		\titlepage
  		\begin{center}
  			\includegraphics[height=2cm]{images/ENS-logo.jpg} \includegraphics[height=2cm]{images/NASA.png}
  			\includegraphics[height=2cm]{images/NIA-logo.jpg}
  		\end{center}
\end{frame}
  	
  	
  	\section{Preliminaries}
  	\subsection{Copilot language}
\begin{frame}
  		\tableofcontents[currentsubsection,sectionstyle=show/shaded,subsectionstyle=show/shaded/hide]
\end{frame}
  	
\begin{frame}
  		\frametitle{Copilot language}
  		Copilot is an \emph{EDSL} (embedded domain specific language), embedded in \emph{Haskell} and used for writing \emph{runtime monitors} for hard real-time, distributed, reactive systems written in C. 
  		\\~\\
  		\text{A Copilot program, can either be : } 
  		\begin{itemize}
  			\item compiled to C using two back-ends : SBV, ATOM
  			\item interpreted
  			\item analyzed using static analysis tools (CBMC, Kind)
  		\end{itemize} 
\end{frame}
  	
\begin{frame}[fragile]
  		\frametitle{Copilot syntax}
  		A program is a list of streams that can be either external  or internal which are defined by mutually recursive stream equations.
  		\\~\\
  		Each stream has a type which can be \texttt{Bool}, \texttt{Int8}, \texttt{Int16}, \texttt{Int32}, \texttt{Int64}, \texttt{Word8}, \texttt{Word16}, \texttt{Word32}, \texttt{Word64}, \texttt{Float}, \texttt{Double}.
  		
\begin{minted}{haskell}
x :: Stream Word16
x = 0
-- x = {0, 0, 0, ...}
y :: Stream Bool
y = x `mod` 2 == 0
-- y = {T, T, ...}
nats :: Stream Word64
nats = [0] ++ (1 + nats)
-- nats = {0,1,2, ..., 2^64-1, 0, 1, ..}  
\end{minted}
\end{frame}
  	
\begin{frame}[fragile]
	\frametitle{Operators}
  		Each operator and constant has been lifted to Streams (working pointwise). \\~\\
  		Two temporal operations working on Streams : 
  		\begin{itemize}
  			\item ++ : which prepends a finite list to a Stream

\begin{minted}{haskell}
(++) :: [a] -> Stream a -> Stream a
\end{minted}
  			\item drop : which drops a finite number of elements at the beginning of a Stream
\begin{minted}{haskell}
drop :: Int -> Stream a -> Stream a  
\end{minted}
  		\end{itemize}
  		
Casts and unsafe casts are also provided :
\begin{minted}{haskell}
cast :: (Typed a, Typed b) => Stream a -> Stream b
unsafeCast :: (Typed a, Typed b) => Stream a -> Stream b
\end{minted}
\end{frame}
  	
\begin{frame}[fragile]
  		\frametitle{Examples}
	Fibonacci sequence :
\begin{minted}{haskell}
fib :: Stream Word64
fib = [1,1] ++ (fib + drop 1 fib) 
-- fib = {1,1,2,3,5,8,13,...,
--       12200160415121876738,
--   /!\ 1293530146158671551,...}
\end{minted}

\end{frame}

\begin{frame}[fragile]
	\frametitle{Interaction}
	Sensors :
	\begin{itemize}
		\item<1|only@1> Sample external variables. 
\begin{minted}{haskell}
extern :: Typed a => String -> Maybe [a] -> Stream a
\end{minted}
Example : 
\begin{lstlisting}[language=C]
unsigned long long int x;
\end{lstlisting}
\begin{minted}{haskell}
x :: Stream Word64
x = extern "x" (Just [0,0..])

x2 = externW64 "x" Nothing
\end{minted}

		\item<2-4> Sample external variables. 
		\item<2|only@2> Sample external arrays. 
\begin{minted}{haskell}
externArray :: (Typed a, Typed b, Integral a) => 
String -> Stream a -> Int -> Maybe [[a]] -> Stream b
\end{minted}
Example : 
\begin{lstlisting}[language=C]
unsigned long long int tab[1000];
\end{lstlisting}
\begin{minted}{haskell}
-- nat = [0] ++ (nats + 1)
x :: Stream Word64
x = externArray "tab" nats 1000 Nothing

x2 = externArrayW64 "tab" nats 1000 Nothing
\end{minted}
	
		\item<3-4> Sample external arrays. 
		\item<3|only@3> Sample external functions. 

\begin{minted}{haskell}
externFun :: Typed a => 
String -> [FunArg] -> Maybe [a] -> Stream a
\end{minted}
Example :
\begin{lstlisting}[language=C]
double sin(double a); //from math.h
\end{lstlisting}
\begin{minted}{haskell}
x :: Stream Double
x = externDouble "x" Nothing

sinx = externFun "sin" [arg x] Nothing
\end{minted}
		
		\item<4> Sample external functions. 
	\end{itemize}
\end{frame}
  	
\begin{frame}[fragile]
  		\frametitle{Interaction}
  		
	Actuators :
  	\begin{itemize}
		\item Triggers : 
\begin{minted}{haskell}
trigger :: 
  String -> Stream Bool -> [TriggerArg] -> Spec
\end{minted}
		\item Observers :
\begin{minted}{haskell}
observer :: Typed a => String -> Stream a -> Spec
\end{minted}
	\end{itemize}
\end{frame}
  	
  	\subsection{ACSL}
  	\begin{frame}
  		\tableofcontents[currentsubsection,sectionstyle=show/shaded,subsectionstyle=show/shaded/hide]
  	\end{frame}
  	
  	\section{Conclusion}
  	\begin{frame}
  		\frametitle{Questions}
  		\text{Questions ?}
  	\end{frame}
  	
  \end{document}
